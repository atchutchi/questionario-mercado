{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">{% if form.instance.pk %}Editar{% else %}Criar{% endif %} Tarifário Orange</h2>

    <form method="post" class="needs-validation orange-form" novalidate>
        {% csrf_token %}

        <!-- Informações Gerais -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Informações Gerais
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.ano.label_tag }}
                        {{ form.ano }}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.mes.label_tag }}
                        {{ form.mes }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Internet USB Pré-pago -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Internet USB Pré-pago
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        {{ form.dongle_3g.label_tag }}
                        {{ form.dongle_3g }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.dongle_4g.label_tag }}
                        {{ form.dongle_4g }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.airbox_4g.label_tag }}
                        {{ form.airbox_4g }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.flybox_4g.label_tag }}
                        {{ form.flybox_4g }}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.flybox_4g_plus.label_tag }}
                        {{ form.flybox_4g_plus }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Internet USB/BOX Residencial - Adesão -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Internet USB/BOX Residencial - Adesão
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.casa_zen_2mbits_adesao.label_tag }}
                        {{ form.casa_zen_2mbits_adesao }}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.casa_conforto_4mbits_adesao.label_tag }}
                        {{ form.casa_conforto_4mbits_adesao }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.casabox_2mbits_adesao.label_tag }}
                        {{ form.casabox_2mbits_adesao }}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.casabox_5mbits_adesao.label_tag }}
                        {{ form.casabox_5mbits_adesao }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Internet USB/BOX Residencial - Mensal -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Internet USB/BOX Residencial - Mensal
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.casa_zen_2mbits_mensal.label_tag }}
                        {{ form.casa_zen_2mbits_mensal }}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.casa_conforto_4mbits_mensal.label_tag }}
                        {{ form.casa_conforto_4mbits_mensal }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.casabox_2mbits_mensal.label_tag }}
                        {{ form.casabox_2mbits_mensal }}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.casabox_5mbits_mensal.label_tag }}
                        {{ form.casabox_5mbits_mensal }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Passes -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Passes Ilimitados
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        {{ form.pass_ilimite_1h.label_tag }}
                        {{ form.pass_ilimite_1h }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.pass_ilimite_3h.label_tag }}
                        {{ form.pass_ilimite_3h }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.pass_ilimite_8h.label_tag }}
                        {{ form.pass_ilimite_8h }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        {{ form.pass_ilimite_dimanche.label_tag }}
                        {{ form.pass_ilimite_dimanche }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.pass_ilimite_nuit.label_tag }}
                        {{ form.pass_ilimite_nuit }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.pass_jours_ferie.label_tag }}
                        {{ form.pass_jours_ferie }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Passes Mo -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Passes Mo
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 mb-3">
                        {{ form.pass_30_mo.label_tag }}
                        {{ form.pass_30_mo }}
                    </div>
                    <div class="col-md-3 mb-3">
                        {{ form.pass_75_mo.label_tag }}
                        {{ form.pass_75_mo }}
                    </div>
                    <div class="col-md-3 mb-3">
                        {{ form.pass_150_mo.label_tag }}
                        {{ form.pass_150_mo }}
                    </div>
                    <div class="col-md-3 mb-3">
                        {{ form.pass_250_mo.label_tag }}
                        {{ form.pass_250_mo }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 mb-3">
                        {{ form.pass_500_mo.label_tag }}
                        {{ form.pass_500_mo }}
                    </div>
                    <div class="col-md-3 mb-3">
                        {{ form.pass_600_mo.label_tag }}
                        {{ form.pass_600_mo }}
                    </div>
                    <div class="col-md-3 mb-3">
                        {{ form.pass_400_mo.label_tag }}
                        {{ form.pass_400_mo }}
                    </div>
                    <div class="col-md-3 mb-3">
                        {{ form.pass_1_go.label_tag }}
                        {{ form.pass_1_go }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Passes Go -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Passes Go
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        {{ form.pass_1_5_go.label_tag }}
                        {{ form.pass_1_5_go }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.pass_3_go.label_tag }}
                        {{ form.pass_3_go }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.pass_10_go.label_tag }}
                        {{ form.pass_10_go }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        {{ form.pass_18_go.label_tag }}
                        {{ form.pass_18_go }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.pass_35_go.label_tag }}
                        {{ form.pass_35_go }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.pass_100_go.label_tag }}
                        {{ form.pass_100_go }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Tarifas On-net -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Tarifa - Minuto de comunicação On-net
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.tarifa_orange_livre_6h_22h.label_tag }}
                        {{ form.tarifa_orange_livre_6h_22h }}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.tarifa_orange_livre_22h_6h.label_tag }}
                        {{ form.tarifa_orange_livre_22h_6h }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_orange_jovem_vip_jovem.label_tag }}
                        {{ form.tarifa_orange_jovem_vip_jovem }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_orange_jovem_vip_6h_22h.label_tag }}
                        {{ form.tarifa_orange_jovem_vip_6h_22h }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_orange_jovem_vip_22h_6h.label_tag }}
                        {{ form.tarifa_orange_jovem_vip_22h_6h }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 mb-3">
                        {{ form.tarifa_orange_intenso.label_tag }}
                        {{ form.tarifa_orange_intenso }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Tarifas Off-net -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Tarifa - Minuto de comunicação Off-net (local)
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_offnet_orange_livre.label_tag }}
                        {{ form.tarifa_offnet_orange_livre }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_offnet_orange_jovem_vip.label_tag }}
                        {{ form.tarifa_offnet_orange_jovem_vip }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_offnet_orange_intenso.label_tag }}
                        {{ form.tarifa_offnet_orange_intenso }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Tarifas Internacionais -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Tarifa - Minuto de comunicação Off-net (Internacional)
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_zona1.label_tag }}
                        {{ form.tarifa_zona1 }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_zona2.label_tag }}
                        {{ form.tarifa_zona2 }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_zona3.label_tag }}
                        {{ form.tarifa_zona3 }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_zona4.label_tag }}
                        {{ form.tarifa_zona4 }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_zona5.label_tag }}
                        {{ form.tarifa_zona5 }}
                    </div>
                    <div class="col-md-4 mb-3">
                        {{ form.tarifa_zona6.label_tag }}
                        {{ form.tarifa_zona6 }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Linhas Alugadas/Dedicadas -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                Linhas Alugadas/Dedicadas
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.toll_free.label_tag }}
                        {{ form.toll_free }}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.vpn.label_tag }}
                        {{ form.vpn }}
                    </div>
                </div>
            </div>

            <!-- Outras Informações -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    Outras Informações
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            {{ form.taxa_imposto.label_tag }}
                            {{ form.taxa_imposto }}
                        </div>
                        <div class="col-md-4 mb-3">
                            {{ form.cartao_sim_adesao.label_tag }}
                            {{ form.cartao_sim_adesao }}
                        </div>
                        <div class="col-md-4 mb-3">
                            {{ form.taxa_adesao.label_tag }}
                            {{ form.taxa_adesao }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 mb-3">
                            {{ form.promocoes.label_tag }}
                            {{ form.promocoes }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 mb-3">
                            {{ form.link_plano.label_tag }}
                            {{ form.link_plano }}
                        </div>
                    </div>
                </div>
            </div>
     
            <!-- Totais (Somente Leitura) -->
            <div class="card mb-4">
                <div class="card-header bg-info text-white">
                    Totais Calculados
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <p><strong>Total Internet Pré-pago:</strong> <span id="total-prepaid">0.00</span></p>
                        </div>
                        <div class="col-md-4">
                            <p><strong>Total Residencial:</strong> <span id="total-residencial">0.00</span></p>
                        </div>
                        <div class="col-md-4">
                            <p><strong>Total Passes:</strong> <span id="total-passes">0.00</span></p>
                        </div>
                    </div>
                </div>
            </div>
     
            <!-- Gráfico -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    Visualização Gráfica
                </div>
                <div class="card-body">
                    <canvas id="orangeChart"></canvas>
                </div>
            </div>
     
            <!-- Botões de Ação -->
            <div class="form-group mt-4">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Salvar
                </button>
                <a href="{% url 'tarifario_orange_list' %}" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancelar
                </a>
            </div>
        </form>
     </div>
     
     {% block extra_js %}
     <!-- Chart.js -->
     <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
     <script src="{% static 'js/tarifario_orange_form_validation.js' %}"></script>
     {% endblock %}
     {% endblock %}